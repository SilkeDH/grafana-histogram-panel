/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","react","@grafana/ui"],(function(e,o,t){return function(e){var o={};function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var i in e)t.d(n,i,function(o){return e[o]}.bind(null,i));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="/",t(t.s=3)}([function(o,t){o.exports=e},function(e,t){e.exports=o},function(e,o){e.exports=t},function(e,o,t){"use strict";t.r(o);var n=t(0),i=function(e,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(e,o)};var r=function(){return(r=Object.assign||function(e){for(var o,t=1,n=arguments.length;t<n;t++)for(var i in o=arguments[t])Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);return e}).apply(this,arguments)};function l(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)o.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]])}return t}function a(e){var o="function"==typeof Symbol&&Symbol.iterator,t=o&&e[o],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}var s=t(1),d=t.n(s),p=t(2),c=function(e,o,t,i,l,s){var d,c,u,g,f,h,m,y=[],S=Object(n.getDisplayProcessor)({field:{config:{unit:null===(h=null===(f=s)||void 0===f?void 0:f.defaults)||void 0===h?void 0:h.unit,decimals:l.decimals}},timeZone:o}),b=-1;try{for(var v=a(e),O=v.next();!O.done;O=v.next()){var T=O.value,x=Object(n.getTimeField)(T).timeField;if(x){var w=function(i){if(i.type!==n.FieldType.number)return"continue";b++;var a=Object(n.getFlotPairs)({xField:x,yField:i,nullValueMode:n.NullValueMode.Null});if(a.length>0){var d=Object(n.reduceField)({field:i,reducers:l.stats||[]}),c=[];l.stats&&(c=l.stats.map((function(e){var o=S(d[e]);return r(r({},o),{title:e})})));var u=void 0;u=t[i.name]&&t[i.name].color?{mode:n.FieldColorMode.Fixed,fixedColor:t[i.name].color}:i.config&&i.config.color?i.config.color:{mode:n.FieldColorMode.Fixed,fixedColor:p.colors[y.length%p.colors.length]},i.config=r(r({},i.config),s?{unit:s.defaults.unit,decimals:s.defaults.decimals,color:u}:{color:u}),i.display=Object(n.getDisplayProcessor)({field:i,timeZone:o});var g=Object(n.getSeriesTimeStep)(x),f=Object(n.hasMsResolution)(x);x.display=Object(n.getDisplayProcessor)({timeZone:o,field:r(r({},x),{type:x.type,config:{unit:"time:"+(f?n.MS_DATE_TIME_FORMAT:n.DEFAULT_DATE_TIME_FORMAT)}})}),y.push({label:Object(n.getFieldDisplayName)(i,T,e),data:a,color:null===(m=i.config.color)||void 0===m?void 0:m.fixedColor,info:c,isVisible:!0,yAxis:{index:t[i.name]&&t[i.name].yAxis||1},seriesIndex:b,timeField:r({},x),valueField:r({},i),timeStep:g})}};try{for(var C=(u=void 0,a(T.fields)),j=C.next();!j.done;j=C.next()){w(j.value)}}catch(e){u={error:e}}finally{try{j&&!j.done&&(g=C.return)&&g.call(C)}finally{if(u)throw u.error}}}}}catch(e){d={error:e}}finally{try{O&&!O.done&&(c=v.return)&&c.call(v)}finally{if(d)throw d.error}}return y},u=function(e){function o(o){var t=e.call(this,o)||this;return t.onSeriesColorChange=t.onSeriesColorChange.bind(t),t.onSeriesAxisToggle=t.onSeriesAxisToggle.bind(t),t.onToggleSort=t.onToggleSort.bind(t),t.onHorizontalRegionSelected=t.onHorizontalRegionSelected.bind(t),t.state={graphSeriesModel:c(o.data.series,o.timeZone,o.options.series||{},o.options.graph,o.options.legend,o.fieldConfig)},t}return function(e,o){function t(){this.constructor=e}i(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}(o,e),o.getDerivedStateFromProps=function(e,o){return r(r({},o),{graphSeriesModel:c(e.data.series,e.timeZone,e.options.series||{},e.options.graph,e.options.legend,e.fieldConfig)})},o.prototype.onSeriesOptionsUpdate=function(e,o){var t=this.props,n=t.onOptionsChange,i=t.options,l=r({},i.series);l[e]=o,n(r(r({},i),{series:l}))},o.prototype.onSeriesAxisToggle=function(e,o){var t=this.props.options.series,n=t[e]?r(r({},t[e]),{yAxis:r(r({},t[e].yAxis),{index:o})}):{yAxis:{index:o}};this.onSeriesOptionsUpdate(e,n)},o.prototype.onSeriesColorChange=function(e,o){var t=this.props.options.series,n=t[e]?r(r({},t[e]),{color:o}):{color:o};this.onSeriesOptionsUpdate(e,n)},o.prototype.onToggleSort=function(e){var o=this.props,t=o.onOptionsChange,n=o.options;t(r(r({},n),{legend:r(r({},n.legend),{sortBy:e,sortDesc:e===n.legend.sortBy&&!n.legend.sortDesc})}))},o.prototype.onHorizontalRegionSelected=function(e,o){(0,this.props.onChangeTimeRange)({from:e,to:o})},o.prototype.render=function(){var e=this,o=this.props.children,t=this.state.graphSeriesModel;return d.a.createElement(p.GraphSeriesToggler,{series:t},(function(t){var n=t.onSeriesToggle,i=t.toggledSeries;return o({series:i,onSeriesColorChange:e.onSeriesColorChange,onSeriesAxisToggle:e.onSeriesAxisToggle,onToggleSort:e.onToggleSort,onSeriesToggle:n,onHorizontalRegionSelected:e.onHorizontalRegionSelected})}))},o}(d.a.Component);t.d(o,"plugin",(function(){return g}));var g=new n.PanelPlugin((function(e){var o=e.data,t=e.timeRange,n=e.timeZone,i=e.width,a=e.height,s=e.options,c=e.fieldConfig,g=e.onOptionsChange,f=e.onChangeTimeRange;if(!o)return d.a.createElement("div",{className:"panel-empty"},d.a.createElement("p",null,"No data found in response"));var h=s.graph,m=h.showLines,y=h.showBars,S=h.showPoints,b=s.legend,v=s.tooltipOptions,O={showBars:y,showLines:m,showPoints:S,tooltipOptions:v},T=(b.asTable,b.isVisible,l(b,["asTable","isVisible"]));return d.a.createElement(u,{data:o,timeZone:n,options:s,fieldConfig:c,onOptionsChange:g,onChangeTimeRange:f},(function(e){e.onSeriesToggle;var o=e.onHorizontalRegionSelected,s=l(e,["onSeriesToggle","onHorizontalRegionSelected"]);return d.a.createElement(p.Graph,r({timeRange:t,timeZone:n,width:i,height:a,onHorizontalRegionSelected:o},O,T,s),d.a.createElement(p.Chart.Tooltip,{mode:v.mode}))}))})).useFieldConfig({standardOptions:[n.FieldConfigProperty.Unit,n.FieldConfigProperty.Decimals]}).setPanelOptions((function(e){e.addBooleanSwitch({path:"graph.showBars",name:"Show bars",description:"",defaultValue:!1}).addBooleanSwitch({path:"graph.showLines",name:"Show lines",description:"",defaultValue:!0}).addBooleanSwitch({path:"graph.showPoints",name:"Show poins",description:"",defaultValue:!1}).addBooleanSwitch({path:"legend.isVisible",name:"Show legend",description:"",defaultValue:!0}).addBooleanSwitch({path:"legend.asTable",name:"Display legend as table",description:"",defaultValue:!1}).addRadio({path:"legend.placement",name:"Legend placement",description:"",defaultValue:"under",settings:{options:[{value:"under",label:"Below graph"},{value:"right",label:"Right to the graph"}]}}).addRadio({path:"tooltipOptions.mode",name:"Tooltip mode",description:"",defaultValue:"single",settings:{options:[{value:"single",label:"Single series"},{value:"multi",label:"All series"}]}})}))}])}));
//# sourceMappingURL=module.js.map