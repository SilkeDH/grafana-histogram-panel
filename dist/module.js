/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","@grafana/ui","react"],(function(e,o,n){return function(e){var o={};function n(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=o,n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var i in e)n.d(t,i,function(o){return e[o]}.bind(null,i));return t},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="/",n(n.s=3)}([function(o,n){o.exports=e},function(e,n){e.exports=o},function(e,o){e.exports=n},function(e,o,n){"use strict";n.r(o);var t=n(0),i=function(e,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])})(e,o)};var r=function(){return(r=Object.assign||function(e){for(var o,n=1,t=arguments.length;n<t;n++)for(var i in o=arguments[n])Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);return e}).apply(this,arguments)};function l(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)o.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]])}return n}function a(e){var o="function"==typeof Symbol&&Symbol.iterator,n=o&&e[o],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}var s=n(2),d=n.n(s),p=n(1),c=function(e,o,n,i,l,s){var d,c,u,g,f,h,y,m=[];console.log(e),console.log(e.length);var S=Object(t.getDisplayProcessor)({field:{config:{unit:null===(h=null===(f=s)||void 0===f?void 0:f.defaults)||void 0===h?void 0:h.unit,decimals:l.decimals}},timeZone:o}),v=-1;try{for(var b=a(e),O=b.next();!O.done;O=b.next()){var T=O.value;console.log(T);var x=Object(t.getTimeField)(T).timeField;if(x){var w=function(e){if(console.log(e),e.type!==t.FieldType.number)return"continue";v++;var i=Object(t.getFlotPairs)({xField:x,yField:e,nullValueMode:t.NullValueMode.Null});if(i.length>0){var a=Object(t.reduceField)({field:e,reducers:l.stats||[]}),d=[];l.stats&&(d=l.stats.map((function(e){var o=S(a[e]);return r(r({},o),{title:e})})));var c=void 0;c=n[e.name]&&n[e.name].color?{mode:t.FieldColorMode.Fixed,fixedColor:n[e.name].color}:e.config&&e.config.color?e.config.color:{mode:t.FieldColorMode.Fixed,fixedColor:p.colors[m.length%p.colors.length]},e.config=r(r({},e.config),s?{unit:s.defaults.unit,decimals:s.defaults.decimals,color:c}:{color:c}),e.display=Object(t.getDisplayProcessor)({field:e,timeZone:o});var u=Object(t.getSeriesTimeStep)(x),g=Object(t.hasMsResolution)(x);x.display=Object(t.getDisplayProcessor)({timeZone:o,field:r(r({},x),{type:x.type,config:{unit:"time:"+(g?t.MS_DATE_TIME_FORMAT:t.DEFAULT_DATE_TIME_FORMAT)}})}),m.push({label:e.name,data:i,color:null===(y=e.config.color)||void 0===y?void 0:y.fixedColor,info:d,isVisible:!0,yAxis:{index:n[e.name]&&n[e.name].yAxis||1},seriesIndex:v,timeField:r({},x),valueField:r({},e),timeStep:u})}};try{for(var C=(u=void 0,a(T.fields)),j=C.next();!j.done;j=C.next()){w(j.value)}}catch(e){u={error:e}}finally{try{j&&!j.done&&(g=C.return)&&g.call(C)}finally{if(u)throw u.error}}}}}catch(e){d={error:e}}finally{try{O&&!O.done&&(c=b.return)&&c.call(b)}finally{if(d)throw d.error}}return m},u=function(e){function o(o){var n=e.call(this,o)||this;return n.onSeriesColorChange=n.onSeriesColorChange.bind(n),n.onSeriesAxisToggle=n.onSeriesAxisToggle.bind(n),n.onToggleSort=n.onToggleSort.bind(n),n.onHorizontalRegionSelected=n.onHorizontalRegionSelected.bind(n),n.state={graphSeriesModel:c(o.data.series,o.timeZone,o.options.series||{},o.options.graph,o.options.legend,o.fieldConfig)},n}return function(e,o){function n(){this.constructor=e}i(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}(o,e),o.getDerivedStateFromProps=function(e,o){return r(r({},o),{graphSeriesModel:c(e.data.series,e.timeZone,e.options.series||{},e.options.graph,e.options.legend,e.fieldConfig)})},o.prototype.onSeriesOptionsUpdate=function(e,o){var n=this.props,t=n.onOptionsChange,i=n.options,l=r({},i.series);l[e]=o,t(r(r({},i),{series:l}))},o.prototype.onSeriesAxisToggle=function(e,o){var n=this.props.options.series,t=n[e]?r(r({},n[e]),{yAxis:r(r({},n[e].yAxis),{index:o})}):{yAxis:{index:o}};this.onSeriesOptionsUpdate(e,t)},o.prototype.onSeriesColorChange=function(e,o){var n=this.props.options.series,t=n[e]?r(r({},n[e]),{color:o}):{color:o};this.onSeriesOptionsUpdate(e,t)},o.prototype.onToggleSort=function(e){var o=this.props,n=o.onOptionsChange,t=o.options;n(r(r({},t),{legend:r(r({},t.legend),{sortBy:e,sortDesc:e===t.legend.sortBy&&!t.legend.sortDesc})}))},o.prototype.onHorizontalRegionSelected=function(e,o){(0,this.props.onChangeTimeRange)({from:e,to:o})},o.prototype.render=function(){var e=this,o=this.props.children,n=this.state.graphSeriesModel;return d.a.createElement(p.GraphSeriesToggler,{series:n},(function(n){var t=n.onSeriesToggle,i=n.toggledSeries;return o({series:i,onSeriesColorChange:e.onSeriesColorChange,onSeriesAxisToggle:e.onSeriesAxisToggle,onToggleSort:e.onToggleSort,onSeriesToggle:t,onHorizontalRegionSelected:e.onHorizontalRegionSelected})}))},o}(d.a.Component);n.d(o,"plugin",(function(){return g}));var g=new t.PanelPlugin((function(e){var o=e.data,n=e.timeRange,t=e.timeZone,i=e.width,a=e.height,s=e.options,c=e.fieldConfig,g=e.onOptionsChange,f=e.onChangeTimeRange;if(!o)return d.a.createElement("div",{className:"panel-empty"},d.a.createElement("p",null,"No data found in response"));var h=s.graph,y=h.showLines,m=h.showBars,S=h.showPoints,v=s.legend,b=s.tooltipOptions,O={showBars:m,showLines:y,showPoints:S,tooltipOptions:b},T=v.asTable,x=v.isVisible,w=l(v,["asTable","isVisible"]);return d.a.createElement(u,{data:o,timeZone:t,options:s,fieldConfig:c,onOptionsChange:g,onChangeTimeRange:f},(function(e){var o=e.onSeriesToggle,s=e.onHorizontalRegionSelected,c=l(e,["onSeriesToggle","onHorizontalRegionSelected"]);return d.a.createElement(p.GraphWithLegend,r({timeRange:n,timeZone:t,width:i,height:a,displayMode:T?p.LegendDisplayMode.Table:p.LegendDisplayMode.List,isLegendVisible:x,sortLegendBy:v.sortBy,sortLegendDesc:v.sortDesc,onSeriesToggle:o,onHorizontalRegionSelected:s},O,w,c),d.a.createElement(p.Chart.Tooltip,{mode:b.mode}))}))})).useFieldConfig({standardOptions:[t.FieldConfigProperty.Unit,t.FieldConfigProperty.Decimals]}).setPanelOptions((function(e){e.addBooleanSwitch({path:"graph.showBars",name:"Show bars",description:"",defaultValue:!0}).addBooleanSwitch({path:"graph.showLines",name:"Show lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"graph.showPoints",name:"Show poins",description:"",defaultValue:!1}).addBooleanSwitch({path:"legend.isVisible",name:"Show legend",description:"",defaultValue:!0}).addBooleanSwitch({path:"legend.asTable",name:"Display legend as table",description:"",defaultValue:!1}).addRadio({path:"legend.placement",name:"Legend placement",description:"",defaultValue:"under",settings:{options:[{value:"under",label:"Below graph"},{value:"right",label:"Right to the graph"}]}}).addRadio({path:"tooltipOptions.mode",name:"Tooltip mode",description:"",defaultValue:"single",settings:{options:[{value:"single",label:"Single series"},{value:"multi",label:"All series"}]}})}))}])}));
//# sourceMappingURL=module.js.map